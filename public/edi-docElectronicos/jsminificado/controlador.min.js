angular.module("electronicos.controllers",["ngSanitize"]).controller("EmpresasCrtl",["$scope","empresasFactory",function(a,b){console.log("EmpresasCrtl"),a.empresasCache=[],b.getAllEmpresas(!1).then(function(b){switch(b.status){case 200:a.empresasCache=b.data;break;default:console.log("No hay conexion")}})}]).controller("LoginCtrl",["$scope","$window","$http","loginFactory","$rootScope","$state","conexionWSocket",function(a,b,c,d,e,f,g){a.deliberatelyTrustDangerousSnippet=function(a){return b.unescape('<p>&nbsp;</p>\n<h3>1. Aceptaci&oacute;n y conocimiento de los T&eacute;rminos y Condiciones.</h3>\n<p>Los T&eacute;rminos y Condiciones son de car&aacute;cter obligatorio y vinculante, que aplica a las actividades que se realicen dentro del Sitio Web. Para efecto del presente T&eacute;rminos y Condiciones, se entiende por &ldquo;Usuarios" a todas las personas naturales o jur&iacute;dicas que adquieran productos o servicios con SWISSYSTEM, el mismo que puede ser de forma individual o corporativa .</p>\n<p>El Usuario acepta que es el &uacute;nico responsable de dar un correcto uso de su usuario y contrase&ntilde;a, que registr&oacute; dentro del sitio web para acceder a su informaci&oacute;n personal en el medio digital.&nbsp;</p>\n<p>Se autoriza a SWISSYSTEM que haga uso de los datos facilitados por el &ldquo;Usuario&rdquo; en los diferentes servicios que el portal ofrece. &nbsp;</p>\n<p>El &ldquo;Usuario&rdquo; al usar el sitio web, declara que conoce y acepta estos t&eacute;rminos y condiciones. Si el &ldquo;Usuario&rdquo; no est&aacute; de acuerdo con los t&eacute;rminos y condiciones deber&aacute; abstenerse de utilizar el sitio web y los servicios y/o productos que se est&aacute;n ofreciendo.&nbsp;</p>\n<p>&nbsp;</p>\n<h3>2. Conocimiento y aceptaci&oacute;n de los siguientes puntos referentes a Facturaci&oacute;n Electr&oacute;nica.</h3>\n<ul>\n<li>\n<p>El Usuario autoriza a SWISSYSTEM a suspender la emisi&oacute;n y el envi&oacute; de la factura f&iacute;sica.</p>\n</li>\n<li>\n<p>El Usuario autoriza a SWISSYSTEM, a la emisi&oacute;n mensual de la factura electr&oacute;nica  en este portal.</p>\n</li>\n<li>\n<p>El Usuario acepta que tiene la obligaci&oacute;n de ingresar al sitio web,para actualizar sus datos personales y correo electr&oacute;nico para el envi&oacute; de la factura electr&oacute;nica.</p>\n</li>\n<li>\n<p>Se desliga a SWISSYSTEM de cualquier responsabilidad en el caso que el &ldquo;Usuario&rdquo; &nbsp;no pueda recibir la notificaci&oacute;n de la Factura Electr&oacute;nica, por haber registrado una cuenta de correo electr&oacute;nico incompleta, confusa o con errores de digitaci&oacute;n.</p>\n</li>\n<li>\n<p>Acepta que SWISSYSTEM le ha informado que todas sus facturas electr&oacute;nicas ser&aacute;n enviadas en formato XML, HTML o PDF al correo electr&oacute;nico que registr&oacute; al momento de suscribirse en la facturaci&oacute;n electr&oacute;nica.</p>\n</li>\n<li>\n<p>Declara que tiene conocimiento, que para visualizar su factura electr&oacute;nica lo debe hacer desde el sitio web, en el &nbsp;bot&oacute;n de servicios dentro del men&uacute; superior, de forma r&aacute;pida y sencilla.</p>\n</li>\n<li>\n<p>El &ldquo;usuario&rdquo; tiene conocimiento que la factura electr&oacute;nica impresa no tiene ning&uacute;n valor tributario. &nbsp;</p>\n</li>\n<li>\n<p>Si usted necesita presentar sus facturas al SRI, deber&aacute; ingresar el archivo XML, en el portal que el SRI le proporcionar&aacute;.</p>\n</li>\n<li>\n<p>Los Usuarios acceder&aacute;n a su Factura Electr&oacute;nica mediante su n&uacute;mero de c&eacute;dula y su contrase&ntilde;a personal. En caso de que el usuario olvide su contrase&ntilde;a deber&aacute; ponerse en contacto con SWISSYSTEM. Registro de Usuario.</h3>\n<p>El Usuario podr&aacute; navegar libremente por el sitio web, pero deber&aacute; estar registrados para poder realizar alguna de las siguientes actividades: visualizaci&oacute;n en l&iacute;nea de sus facturas, acceder a los formularios en l&iacute;nea, chats en l&iacute;nea, entre otros servicios.</p>')},a.formDatos={},a.notificarBarra=function(a,b){e.blockprocesar=a,e.acccion_a_procesar=b},a.formDatosVirtual={},a.procesarForm=function(){if(a.notificarBarra(!0,"Autentificando..."),a.formDatosVirtual&&a.formDatosVirtual.password&&(a.formDatosVirtual.password=a.formDatosVirtual.password.trim()),a.formDatos={condic:a.formDatosVirtual.condic,username:a.formDatosVirtual.username,password:a.formDatosVirtual.password},a.formDatosVirtual.formularioAprocesar=!0,a.formDatos.condic===!0){var c=d.login(a.formDatos);c.success(function(c,d,e,f){a.notificarBarra(!1,""),c&&c.login===!0?(a.formDatosVirtual={},new PNotify({title:"INGRESO AL SISTEMA",text:"Usuario ha ingresado al sistema con éxito ...",type:"info",buttons:{closer:!0,sticker:!1}}),b.location.href="/ver/movimientos"):new PNotify({title:"INGRESO AL SISTEMA",text:"Clave o password no aceptados.",type:"error",buttons:{closer:!0,sticker:!1}}),a.formDatosVirtual.formularioAprocesar=!1}),c.error(function(b,c,d,e){switch(c){case 200:new PNotify({title:"ERROR AL INGRESO",text:"Usuario o Password incorrecto.",type:"error",buttons:{closer:!0,sticker:!1}});break;case 500:case 404:new PNotify({title:"ERROR AL INGRESO",text:"El servidor no está respondiendo por favor inténtelo en un unos minutos.",type:"error",buttons:{closer:!0,sticker:!1}})}a.formDatosVirtual.formularioAprocesar=!1,a.notificarBarra(!1,"")})}else new PNotify({title:"ERROR AL INGRESO",text:"Debe aceptar los T&eacute;rminos y Condiciones",type:"error",buttons:{closer:!0,sticker:!1}}),a.formDatosVirtual.formularioAprocesar=!1,a.notificarBarra(!1,"")},a.procesarFormReseteoPassword=function(){if(a.formDatosVirtual.formularioAprocesar=!0,a.formReseteoPassword={condic:a.formDatosVirtual.rcondic,username:a.formDatosVirtual.rusername,captcha:a.formDatosVirtual.captcha},a.formReseteoPassword.condic===!0){var b=d.recuperacion(a.formReseteoPassword);b.success(function(b,c,d,e){b.toLowerCase().indexOf("error")>=0&&new PNotify({title:"ERROR EN LA RECUPERACIÓN",text:b,type:"error",buttons:{closer:!0,sticker:!1}}),b.toLowerCase().indexOf("no-ruc-cedula")>=0&&new PNotify({title:"ERROR EN LA RECUPERACIÓN",text:"No hemos econtrado un usuario con la cédula/ruc ingresado",type:"error",buttons:{closer:!0,sticker:!1}}),new PNotify({title:"RECUPERACIÓN EXITOSA",text:b,type:"info",buttons:{closer:!0,sticker:!1}}),a.formDatosVirtual={},f.go("ingreso.sistema")}),b.error(function(a,b,c,d){switch(b){case 200:new PNotify({title:"ERROR EN LA RECUPERACIÓN",text:"Usuario o Número de validación incorrecto.",type:"error",buttons:{closer:!0,sticker:!1}});break;case 500:case 404:new PNotify({title:"ERROR EN LA RECUPERACIÓN",text:"El servidor no está respondiendo por favor inténtelo en un unos minutos.",type:"error",buttons:{closer:!0,sticker:!1}})}})}else new PNotify({title:"ERROR EN LA RECUPERACIÓN",text:"Debe aceptar los T&eacute;rminos y Condiciones",type:"error",buttons:{closer:!0,sticker:!1}})},a.enviarMensaje=function(a){console.log(a),socket.emit("mensaje",a)}}]);