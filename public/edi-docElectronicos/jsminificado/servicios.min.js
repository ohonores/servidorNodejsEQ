angular.module("uiRouterDocElectronicos.services",[]).factory("menusDcoumentosEstados",["$http","$window",function(a,b){var c="/ver/menus/:perfil",d="/ver/documentos/:perfil",e="/ver/estados/:empresa/:documento/:perfil",f={};return f.getMenus=function(d){b.usuario&&b.usuario.perfil?a.get(c.replace(":perfil",b.usuario.perfil)).then(function(a){d(a.data)}):d([])},f.getDocumentos=function(c){b.usuario&&b.usuario.perfil?a.get(d.replace(":perfil",b.usuario.perfil)).then(function(a){c(a.data)}):c([])},f.getEstados=function(c,d,f){b.usuario&&b.usuario.perfil?a.get(e.replace(":empresa",c).replace(":documento",d).replace(":perfil",b.usuario.perfil)).then(function(a){f(a.data)}):f([])},f}]).factory("movimientoFactory",["$http","utils",function(a,b){var c="/movimientos/:prefijo/",d={};return d.getMovimientos=function(b,d){return a.get(c.replace(":prefijo",d)+"/busqueda/"+JSON.stringify(b))},d.getMovimientoBitacora=function(b,d){return a.get(c.replace(":prefijo",d)+"/bitacora/busqueda/"+b)},d.eliminarMovimiento=function(b,d){return a.get(c.replace(":prefijo",d)+"/eliminar/"+b)},d.editarXmlMovimiento=function(b,d){return a.get(c.replace(":prefijo",d)+"/editar/"+b)},d.bajarRide=function(b,d){return a.get(c.replace(":prefijo",d)+"/bajar/ride/"+b)},d.bajarXmlAutorizado=function(b,d){return a.get(c.replace(":prefijo",d)+"/bajar/xml/"+b)},d}]).factory("clienteProveedorFactory",["$http",function(a){var b="/ver/consultar/cliente-proveedor/id/:prefijo",c={};return c.getClienteProveedor=function(c){return a.get(b.replace(":prefijo",c))},c.actualizarClienteProveedor=function(c,d){return a.put(b.replace(":prefijo",d)+"/actualizar/",c)},c}]).factory("tablaRegistrosFactory",["$http","$window",function(a,b){var c="/edi-docElectronicos/assets/menusYestados.json",d={};return d.getColumnas=function(d){if(b.localStorage.getItem("__columnas__data_"+b.usuario.id))try{return void d(!0,JSON.parse(b.localStorage.getItem("__columnas__data_"+b.usuario.id)))}catch(e){b.localStorage.removeItem("__columnas__data_"+b.usuario.id)}a.get(c).then(function(a){switch(a.status){case 200:d(!0,a.data.columnasTablaMov);break;default:d(!1)}})},d}]).factory("sriFactory",["$http","utils",function(a,b){var c="/sri-acciones/:prefijo/",d={};return d.enviarXml=function(b,d){return a.get(c.replace(":prefijo",d)+"/enviar/"+b)},d.autorizarXml=function(b,d){return a.get(c.replace(":prefijo",d)+"/autorizar/"+b)},d}]).factory("archivoFactory",["$http","utils",function(a,b){var c="/archivos-acciones/:prefijo/",d={};return d.subirArchivo=function(b,d){return a.put(c.replace(":prefijo",d)+"/subir/",b)},d.bajarArchivo=function(b,d){return a.get(c.replace(":prefijo",d)+"/bajar/"+b)},d.eliminarArchivo=function(b,d){return a.get(c.replace(":prefijo",d)+"/eliminar/"+b)},d}]).factory("formatDateFactory",function(){var a=/^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g,b={};return b.formatDateV2=function(b){if(b instanceof Date)return!0;if(b.split("/").length>0)return!0;if(b.split("-").length>0)return!0;var c=b.slice(0,2);c.length<2&&(c="0"+c);var d=b.slice(2,4);d.length<2&&(d="0"+d);var e=b.slice(4,8);return!!a.test(c+"/"+d+"/"+e)},b}).factory("empresasFactory",["$http","$window",function(a,b){var c="/consultar/empresas/1",d={};return d.getAllEmpresas=function(d){if(d){if(b.localStorage.getItem("__empresas_cache__data"))try{return JSON.parse(b.localStorage.getItem("__empresas_cache__data")).datums}catch(e){console.log(e)}return[]}return b.localStorage.removeItem("__empresas_cache__data"),a.get(c)},d}]).factory("loginFactory",["$http","$window",function(a,b){var c="/login",d="/ver/salir",e="/reseteo",f={};return f.login=function(b){return a.post(c,b)},f.recuperacion=function(b){return a.post(e,b)},f.logout=function(){var c=a.get(d);c.success(function(a,c,d,e){b.location.href="/"}),c.error(function(a,c,d,e){b.notificar("Por favor int&eacute;ntelo nuevamente","error")})},f}]).factory("currentUsuarioMV",["$http","$window",function(a,b){var c=b.usuario;return c}]).factory("conexionWSocket",["$http","$window",function(a,b){function c(a){f=a?io(b.location.origin+"/ws-"+a):io(b.location.origin)}function d(){return f}function e(){f.emit("autenficacion",{room:"recuperacionClave"})}var f,g={inicio:c,socket:d,recuperacionClave:e};return g}]);